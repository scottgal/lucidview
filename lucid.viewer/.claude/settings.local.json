{
  "permissions": {
    "allow": [
      "Bash(dotnet tool list:*)",
      "Bash(dotnet exec:*)",
      "Bash(git stash:*)",
      "Bash(dotnet restore:*)",
      "Bash(cmd.exe /c \"dir %USERPROFILE%\\\\.nuget\\\\packages\\\\msagl* /s /b 2>NUL\")",
      "Bash(powershell -Command \"Get-ChildItem -Path \"\"$env:USERPROFILE\\\\.nuget\\\\packages\\\\msagl*\"\" -Directory | Select-Object -ExpandProperty FullName\")",
      "Bash(ls:*)",
      "Bash(dir:*)",
      "Bash(dotnet run:*)",
      "Bash(pwsh -Command \"& ./publish.ps1 -Platform win -Clean\")",
      "Bash(taskkill //F //PID 50848)",
      "Bash(git ls-tree:*)",
      "Bash(taskkill:*)",
      "Bash(tasklist:*)",
      "Bash(findstr:*)",
      "Bash(powershell -Command \"Get-Process | Where-Object { $_.ProcessName -match ''lucid|dotnet'' } | Select-Object Id,ProcessName | Format-Table -AutoSize\")",
      "Bash(powershell -NoProfile -Command:*)",
      "Bash(echo:*)",
      "mcp__plugin_playwright_playwright__browser_navigate",
      "WebSearch",
      "WebFetch(domain:docs.mermaidchart.com)",
      "WebFetch(domain:mermaid.js.org)",
      "WebFetch(domain:mermaid.ai)",
      "WebFetch(domain:notepad.onghu.com)",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:d2lang.com)",
      "WebFetch(domain:reactflow.dev)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(python3 -c \"\nimport zipfile, sys\n# List types in the LiveMarkdown assembly to understand Image handling\nz = zipfile.ZipFile\\(r''E:\\\\source\\\\markdown.viewer\\\\MarkdownViewer\\\\bin\\\\Debug\\\\net10.0\\\\win-x64\\\\LiveMarkdown.Avalonia.dll''\\)\n\")",
      "Bash(ilspycmd:*)",
      "Bash(dotnet add package:*)",
      "Bash(pwsh -Command \"& { $env:PLAYWRIGHT_BROWSERS_PATH = 0; dotnet tool install --global Microsoft.Playwright.CLI 2>&1; playwright install chromium 2>&1 }\")",
      "Bash(pwsh -Command \"& { $env:PLAYWRIGHT_BROWSERS_PATH = ''0''; dotnet run --project . -- install-playwright 2>&1 }\":*)",
      "Bash(pwsh -c \"bin/Debug/net10.0/playwright.ps1 install chromium\":*)",
      "Bash(cmd /c \"dir /b \"\"E:\\\\source\\\\markdown.viewer\\\\Naiad\\\\src\\\\Naiad\\\\Diagrams\"\"\")",
      "Bash(powershell -Command:*)",
      "Bash(powershell -NoProfile:*)",
      "WebFetch(domain:docs.structurizr.com)",
      "WebFetch(domain:icepanel.medium.com)",
      "WebFetch(domain:structurizr.com)",
      "Bash(cmd:*)",
      "Bash(cd \"E:/source/markdown.viewer\" && git add \\\\\n  Naiad/src/Naiad/Diagrams/C4/C4Model.cs \\\\\n  Naiad/src/Naiad/Diagrams/C4/C4Parser.cs \\\\\n  Naiad/src/Naiad/Diagrams/C4/C4Renderer.cs \\\\\n  Naiad/src/Naiad/Rendering/SvgDocument.cs \\\\\n  Naiad/src/Naiad/Rendering/SvgBuilder.cs \\\\\n  MarkdownViewer/Controls/DiagramCanvas.cs \\\\\n  MarkdownViewer/Services/MarkdownService.cs \\\\\n  MarkdownViewer/Plugins/AvaloniaNativeDiagramRendererPlugin.cs \\\\\n  MarkdownViewer/Views/MainWindow.axaml.cs \\\\\n  2>&1)",
      "Bash(cd \"E:/source/markdown.viewer\" && git reset HEAD .gitmodules Naiad/lib/Dagre.NET 2>&1)",
      "Bash(cd \"E:/source/markdown.viewer\" && git commit -m \"$\\(cat <<'EOF'\nAdd C4 diagram zoom/drill-down for cross-diagram navigation\n\nEnable clicking elements in C4 diagrams to scroll to related diagrams\nat deeper zoom levels \\(Context→Container→Component\\). Matches element IDs\nto boundary IDs across diagrams automatically, with explicit $link support.\n\n- Parse $link parameter on C4 Person/System/Container/Component elements\n- Add HitRegions and Metadata to SvgDocument for interactive diagrams\n- Emit element groups and hit regions from C4Renderer\n- Build cross-diagram zoom index in MarkdownService\n- Add click/hover/highlight interaction to DiagramCanvas\n- Wire zoom targets and scroll navigation through plugin to MainWindow\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\" 2>&1)",
      "Bash(tail:*)",
      "Bash(cd \"E:/source/markdown.viewer\" && git add .gitignore && git diff --staged --stat 2>&1)",
      "Bash(cd \"E:/source/markdown.viewer\" && git commit -m \"$\\(cat <<'EOF'\nRemove verified PNG test snapshots from repo\n\nSVG snapshots are sufficient for test verification. Removes 152 PNG files\nand adds *.verified.png to .gitignore to prevent re-adding.\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\" 2>&1)",
      "Bash(head:*)",
      "Bash(unzip:*)",
      "WebFetch(domain:www.microsoft.com)",
      "WebFetch(domain:raphlinus.github.io)",
      "WebFetch(domain:docs.yworks.com)",
      "WebFetch(domain:pomax.github.io)",
      "WebFetch(domain:cprimozic.net)",
      "WebFetch(domain:people.eng.unimelb.edu.au)",
      "WebFetch(domain:www.particleincell.com)",
      "WebFetch(domain:www.truetex.com)",
      "Bash(gh repo:*)",
      "Bash(cd:*)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/lib/Dagre.NET\" && git push origin main 2>&1)",
      "Bash(gh secret:*)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/lib/Dagre.NET\" && git commit -m \"$\\(cat <<'EOF'\nFix package casing to Mostlylucid.Dagre, use OIDC trusted publishing\n\n- Change PackageId from MostlyLucid.Dagre to Mostlylucid.Dagre\n- Replace NUGET_API_KEY secret with NuGet/login OIDC trusted publisher\n- Add id-token permission for OIDC authentication\n- Update README references to match Mostlylucid casing\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\" && git push origin main 2>&1)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/lib/Dagre.NET\" && git commit -m \"$\\(cat <<'EOF'\nReduce allocations in hot paths: zero-alloc iteration + in-place updates\n\n- Add PredecessorKeys/SuccessorKeys for zero-allocation iteration in BK\n  conflict detection and type-1/type-2 conflict scanning\n- Add HasChildren\\(\\) to avoid array allocation for existence checks\n- Replace LINQ Enumerable.Range\\(\\).ToArray\\(\\) with direct loop in util.range\\(\\)\n- Update alignCoordinates\\(\\) to modify dictionaries in-place instead of\n  creating new ones\n- Reuse CrossEntry list buffer in twoLayerCrossCount instead of allocating\n  per north-layer node\n\nBenchmark: ~3% memory reduction across all graph sizes \\(311MB→311MB stress\\).\nThese target the iteration overhead; the bulk allocations are structural\n\\(4 dicts per node in DagreGraph.SetNode, layer graph creation in Order phase\\).\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\" && git push origin main 2>&1)",
      "mcp__plugin_playwright_playwright__browser_take_screenshot",
      "Bash(find:*)",
      "Bash(cd E:/source/markdown.viewer/Naiad/src && cat <<'EOF' | dotnet run --project Naiad.RenderCli/Naiad.RenderCli.csproj -- render test-renders/subgraph-no-edges.png --scale 2 2>&1\nflowchart TD\n    subgraph GroupA[\"Standalone Group\"]\n        X1[Isolated 1]\n        X2[Isolated 2]\n    end\n    subgraph GroupB[\"Connected Group\"]\n        Y1[Connected 1]\n        Y2[Connected 2]\n    end\n    Y1 --> Y2\nEOF)",
      "Bash(cd E:/source/markdown.viewer/Naiad/src && cat <<'EOF' | dotnet run --project Naiad.RenderCli/Naiad.RenderCli.csproj -- render test-renders/subgraph-edge-between.png --scale 2 2>&1\nflowchart LR\n    subgraph sub1[\"Source\"]\n        S1[Start]\n        S2[Begin]\n    end\n    subgraph sub2[\"Processing\"]\n        P1[Step 1]\n        P2[Step 2]\n        P3[Step 3]\n    end\n    subgraph sub3[\"Output\"]\n        O1[Result]\n    end\n    S1 --> P1\n    S2 --> P2\n    P1 --> P3\n    P2 --> P3\n    P3 --> O1\nEOF)",
      "Bash(cd E:/source/markdown.viewer/Naiad/src && cat <<'EOF' | dotnet run --project Naiad.RenderCli/Naiad.RenderCli.csproj -- render test-renders/subgraph-edge-cases.png --scale 2 2>&1\nflowchart TD\n    subgraph NoTitle\n        NT1[No title subgraph]\n    end\n    subgraph Empty[\"Empty Subgraph\"]\n    end\n    subgraph Single[\"Single Node\"]\n        S1[Alone]\n    end\n    subgraph Deep1[\"Level 1\"]\n        subgraph Deep2[\"Level 2\"]\n            subgraph Deep3[\"Level 3\"]\n                subgraph Deep4[\"Level 4\"]\n                    D1[Deep Node]\n                end\n            end\n        end\n    end\n    NT1 --> S1\n    S1 --> D1\nEOF)",
      "Bash(cd E:/source/markdown.viewer/Naiad/src && cat <<'EOF' | dotnet run --project Naiad.RenderCli/Naiad.RenderCli.csproj -- render test-renders/seq-complex.png --scale 2 2>&1\nsequenceDiagram\n    autonumber\n    actor User\n    participant API as REST API\n    participant Auth as Auth Service\n    participant DB as Database\n    participant Cache as Redis Cache\n    participant Queue as Message Queue\n    \n    User->>+API: POST /login\n    API->>+Auth: Validate credentials\n    Auth->>+DB: Query user\n    DB-->>-Auth: User record\n    Auth->>Auth: Verify password hash\n    alt Valid credentials\n        Auth-->>API: JWT token\n        API->>+Cache: Store session\n        Cache-->>-API: OK\n        API-->>User: 200 OK + token\n    else Invalid credentials\n        Auth-->>API: Auth failed\n        API->>+Queue: Log failed attempt\n        Queue-->>-API: Queued\n        API-->>-User: 401 Unauthorized\n    end\n    \n    Note over User,API: Subsequent requests use JWT\n    \n    User->>+API: GET /profile\n    API->>+Auth: Validate JWT\n    Auth-->>-API: Valid\n    API->>+Cache: Check cache\n    alt Cache hit\n        Cache-->>API: Cached profile\n    else Cache miss\n        API->>+DB: Query profile\n        DB-->>-API: Profile data\n        API->>Cache: Update cache\n    end\n    Cache-->>-API: Done\n    API-->>-User: 200 Profile\nEOF)",
      "Bash(kill %1:*)",
      "Bash(grep:*)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src\" && printf 'classDiagram\\\\n    Animal <|-- Duck\\\\n    Animal <|-- Fish\\\\n    Animal : +int age\\\\n    Animal : +String gender\\\\n    Animal: +isMammal\\(\\)\\\\n    Duck : +String beakColor\\\\n    Duck : +swim\\(\\)\\\\n    Fish : -int sizeInFeet\\\\n    Fish : +canEat\\(\\)\\\\n' | dotnet run --project Naiad.RenderCli/Naiad.RenderCli.csproj -- render \"test-renders/polish-class.png\" --scale 2 2>&1)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src\" && printf 'xychart-beta\\\\n    title \"Sales Revenue\"\\\\n    x-axis [jan, feb, mar, apr, may]\\\\n    y-axis \"Revenue \\(in $\\)\" 4000 --> 11000\\\\n    bar [5000, 6000, 7500, 8200, 9800]\\\\n    line [5000, 6000, 7500, 8200, 9800]' | dotnet run --project Naiad.RenderCli -- render test-renders/polish-xychart.png --scale 2 2>&1)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src\" && printf 'sankey-beta\\\\nAgricultural waste,Bio-conversion,124.729\\\\nBio-conversion,Liquid,0.597\\\\nBio-conversion,Losses,26.862\\\\nBio-conversion,Solid,280.322\\\\nBio-conversion,Gas,81.144' | dotnet run --project Naiad.RenderCli -- render test-renders/polish-sankey.png --scale 2 2>&1)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src\" && printf 'block-beta\\\\ncolumns 3\\\\na[\"Frontend\"] b[\"Backend\"] c[\"Database\"]' | dotnet run --project Naiad.RenderCli -- render test-renders/polish-block.png --scale 2 2>&1)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src\" && printf 'packet-beta\\\\n0-15: \"Source Port\"\\\\n16-31: \"Destination Port\"\\\\n32-63: \"Sequence Number\"\\\\n64-95: \"Acknowledgment Number\"' | dotnet run --project Naiad.RenderCli -- render test-renders/polish-packet.png --scale 2 2>&1)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src\" && printf 'requirementDiagram\\\\n\\\\nrequirement test_req {\\\\n    id: 1\\\\n    text: The system shall do something\\\\n    risk: high\\\\n    verifymethod: test\\\\n}' | dotnet run --project Naiad.RenderCli -- render test-renders/polish-requirement.png --scale 2 2>&1)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src\" && printf 'radar-beta\\\\naxis A, B, C, D, E\\\\ncurve data1[\"Series1\"]{20, 40, 60, 80, 50}' | dotnet run --project Naiad.RenderCli -- render test-renders/polish-radar.png --scale 2 2>&1)",
      "Bash(printf Test!:*)",
      "Bash(printf sequenceDiagram\\\\n    A->>B: Test!:*)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src\" && cat <<'MERMAID' | dotnet run --project Naiad.RenderCli -- svg test-renders/scoring-pipeline-fixed.svg 2>&1\nflowchart TD\n    subgraph Input[\"1. Input Processing\"]\n        A[Raw Text] --> B[Tokenizer]\n        B --> C[Token Stream]\n    end\n    subgraph Features[\"2. Feature Extraction\"]\n        C --> D[TF-IDF]\n        C --> E[Word Embeddings]\n        D --> F[Feature Vector]\n        E --> F\n    end\n    subgraph Scoring[\"3. Scoring Pipeline\"]\n        F --> G{Model Router}\n        G -->|Simple| H[Linear Model]\n        G -->|Complex| I[Neural Net]\n        G -->|Hybrid| J[Ensemble]\n        H --> K[Raw Score]\n        I --> K\n        J --> K\n    end\n    subgraph Output[\"4. Post-Processing\"]\n        K --> L[Normalizer]\n        L --> M[Threshold Check]\n        M -->|Pass| N[Accept]\n        M -->|Fail| O[Reject]\n        M -->|Review| P[Manual Queue]\n    end\nMERMAID)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src\" && cat <<'MERMAID' | dotnet run --project Naiad.RenderCli -- render test-renders/scoring-pipeline-fixed.png --scale 2 2>&1\nflowchart TD\n    subgraph Input[\"1. Input Processing\"]\n        A[Raw Text] --> B[Tokenizer]\n        B --> C[Token Stream]\n    end\n    subgraph Features[\"2. Feature Extraction\"]\n        C --> D[TF-IDF]\n        C --> E[Word Embeddings]\n        D --> F[Feature Vector]\n        E --> F\n    end\n    subgraph Scoring[\"3. Scoring Pipeline\"]\n        F --> G{Model Router}\n        G -->|Simple| H[Linear Model]\n        G -->|Complex| I[Neural Net]\n        G -->|Hybrid| J[Ensemble]\n        H --> K[Raw Score]\n        I --> K\n        J --> K\n    end\n    subgraph Output[\"4. Post-Processing\"]\n        K --> L[Normalizer]\n        L --> M[Threshold Check]\n        M -->|Pass| N[Accept]\n        M -->|Fail| O[Reject]\n        M -->|Review| P[Manual Queue]\n    end\nMERMAID)",
      "mcp__plugin_playwright_playwright__browser_snapshot",
      "mcp__plugin_playwright_playwright__browser_click",
      "mcp__plugin_playwright_playwright__browser_close",
      "mcp__plugin_playwright_playwright__browser_resize",
      "mcp__plugin_playwright_playwright__browser_run_code",
      "Bash(cd /e/source/markdown.viewer/Naiad/lib/Dagre.NET && git checkout -- . 2>&1)",
      "Bash(dotnet nuget:*)",
      "Bash(head -c 2000 /tmp/dagre-profile.speedscope.speedscope.json 2>/dev/null | python3 -m json.tool 2>/dev/null || head -c 2000 /tmp/dagre-profile.speedscope.speedscope.json 2>/dev/null)",
      "Bash(python3:*)",
      "Bash(node:*)",
      "Bash(mkdir -p ~/trace-analyze && cp \"E:/source/markdown.viewer/Naiad/src/Naiad.Benchmarks/analyze-trace.cs\" ~/trace-analyze/analyze-trace.cs && cd ~/trace-analyze && dotnet run analyze-trace.cs 2>&1)",
      "Bash(dotnet-trace collect:*)",
      "Bash(cd \"E:/source/markdown.viewer\" && git submodule status 2>&1)",
      "Bash(cd \"E:/source/markdown.viewer\" && git config --file .git/config -l | grep -i dagre 2>&1)",
      "Bash(cd \"E:/source\" && git clone https://github.com/scottgal/mostlylucid.dagre.git mostlylucid.dagre 2>&1)",
      "mcp__claude_ai_Mermaid_Chart__validate_and_render_mermaid_diagram",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src/test-renders\" && npx -y @mermaid-js/mermaid-cli@latest mmdc -i llm-field-mapping.mmd -o llm-field-mapping-mermaid.svg -t default 2>&1)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src/test-renders\" && npx -y @mermaid-js/mermaid-cli@latest mmdc --input llm-field-mapping.mmd --output llm-field-mapping-mermaid.svg --theme default 2>&1)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src/test-renders\" && npx -y @mermaid-js/mermaid-cli@latest mmdc -i \"llm-field-mapping.mmd\" -o \"llm-field-mapping-mermaid.svg\" 2>&1)",
      "Bash(npx:*)",
      "mcp__plugin_superpowers-chrome_chrome__use_browser",
      "Bash(sort:*)",
      "WebFetch(domain:www.nuget.org)",
      "WebFetch(domain:www.questpdf.com)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src/Naiad.RenderCli\" && cat << 'MERMAID' | dotnet run -- render \"E:/source/markdown.viewer/naiad-fanout-test.png\" --scale 2\nflowchart TD\n    SOURCE[Data Source]\n    SOURCE --> A[Transform A]\n    SOURCE --> B[Transform B]\n    SOURCE --> C[Transform C]\n    SOURCE --> D[Transform D]\n    SOURCE --> E[Transform E]\n    SOURCE --> F[Transform F]\n    A --> MERGE[Merge Results]\n    B --> MERGE\n    C --> MERGE\n    D --> MERGE\n    E --> MERGE\n    F --> MERGE\nMERMAID)",
      "Bash(cd \"E:/source/mostlylucid.dagre\" && git checkout HEAD -- Mostlylucid.Dagre/networkSimplexModule.cs 2>&1)",
      "Bash(python:*)",
      "WebFetch(domain:deepwiki.com)",
      "WebFetch(domain:csharp.hotexamples.com)",
      "WebFetch(domain:www.syncfusion.com)",
      "WebFetch(domain:eclipse.dev)",
      "WebFetch(domain:arxiv.org)",
      "WebFetch(domain:ar5iv.labs.arxiv.org)",
      "WebFetch(domain:blog.disy.net)",
      "WebFetch(domain:cs.brown.edu)",
      "WebFetch(domain:erikbrinkman.github.io)",
      "Bash(start:*)",
      "Bash(git:*)",
      "Bash(sleep 3:*)",
      "mcp__plugin_playwright_playwright__browser_evaluate",
      "mcp__plugin_playwright_playwright__browser_wait_for",
      "mcp__plugin_playwright_playwright__browser_press_key",
      "Bash(sleep 2:*)",
      "Bash(curl:*)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src\" && printf 'geo\\\\ntitle UK Town Markers\\\\ncountry uk\\\\ntown \"London\" color=#ef4444 size=6\\\\ntown \"Manchester\" color=#3b82f6\\\\ntown \"Edinburgh\" color=#22c55e\\\\n' | dotnet run --project Naiad.RenderCli -- svg --output test-renders/geo-uk-test.svg 2>&1)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src\" && printf 'geo\\\\ntitle UK Town Markers\\\\ncountry uk\\\\ntown \"London\" color=#ef4444 size=6\\\\ntown \"Manchester\" color=#3b82f6\\\\ntown \"Edinburgh\" color=#22c55e\\\\n' | dotnet run --project Naiad.RenderCli -- svg -o \"E:/source/markdown.viewer/Naiad/src/test-renders/geo-uk-test.svg\" 2>&1)",
      "Bash(cd \"E:/source/markdown.viewer/Naiad/src\" && printf 'geo\\\\ntitle UK Town Markers\\\\ncountry uk\\\\ntown \"London\" color=#ef4444 size=6\\\\ntown \"Manchester\" color=#3b82f6\\\\ntown \"Edinburgh\" color=#22c55e\\\\n' | dotnet run --project Naiad.RenderCli -- svg \"test-renders/geo-uk-test.svg\" 2>&1)"
    ]
  }
}
